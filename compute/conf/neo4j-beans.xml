<?xml version="1.0" encoding="UTF-8" ?> 
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:context="http://www.springframework.org/schema/context"
	   xmlns:tx="http://www.springframework.org/schema/tx"
	   xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xsi:schemaLocation="
		http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/context 
		http://www.springframework.org/schema/context/spring-context-3.0.xsd
		http://www.springframework.org/schema/tx 
		http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
		http://www.springframework.org/schema/data/neo4j
		http://www.springframework.org/schema/data/neo4j/spring-neo4j-2.0.xsd">

	<bean id="propertyPlaceholderConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">  
		<property name="locations">  
	    	<list><value>classpath:jacs.properties</value></list>  
	  	</property>  
	</bean>  
	
	<context:spring-configured/>
    <context:annotation-config/>
    
    <!-- 
    <neo4j:config storeDirectory="/groups/scicomp/jacsData/servers/rokicki-ws/neo4j/data/graph.db"/>
     -->
	     
	<bean id="graphDatabaseService" class="org.neo4j.kernel.EmbeddedGraphDatabase" destroy-method="shutdown">
		<constructor-arg index="0" value="/home/rokickik/dev/neo4j-1.7.M01/data/load.db" />
		<!-- optionally pass in neo4j-config parameters to the graph database 
		<constructor-arg index="1">
			<map>
				<entry key="allow_store_upgrade" value="true" />
			</map>
		</constructor-arg> 
		-->
	</bean>

	<!-- 
	<bean id="graphDatabaseService" class="org.springframework.data.neo4j.rest.SpringRestGraphDatabase">	
		<constructor-arg index="0" value="${Neo4j.ServerURL}" />
		<constructor-arg index="1" value="${Neo4j.ServerLogin}" />
		<constructor-arg index="2" value="${Neo4j.ServerPassword}" />
	</bean>
	 -->
	
	<neo4j:config graphDatabaseService="graphDatabaseService"/>
 
	<bean id="neo4jTransactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
		<property name="transactionManager">
			<bean class="org.neo4j.kernel.impl.transaction.SpringTransactionManager">
				<constructor-arg ref="graphDatabaseService" />
			</bean>
		</property>
		<property name="userTransaction">
			<bean class="org.neo4j.kernel.impl.transaction.UserTransactionImpl">
				<constructor-arg ref="graphDatabaseService" />
			</bean>
		</property>
	</bean>
	
	<tx:annotation-driven mode="aspectj" transaction-manager="neo4jTransactionManager" />

	<bean id="graphAccess" class="org.janelia.it.jacs.compute.access.neo4j.GraphAccess"/>
 
</beans>