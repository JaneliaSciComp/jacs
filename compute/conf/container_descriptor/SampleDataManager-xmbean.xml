<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mbean PUBLIC
          "-//JBoss//DTD JBOSS XMBEAN 1.0//EN"
          "http://www.jboss.org/j2ee/dtd/jboss_xmbean_1_0.dtd">
<mbean>

    <description>Sample Management Bean</description>
    <class>org.janelia.it.jacs.compute.mbean.SampleDataManager</class>
    <constructor>
        <description>The default constructor</description>
        <name>SampleDataManager</name>
    </constructor>

    <operation>
        <description>Run routine maintenance tasks on all Samples for all users</description>
        <name>runAllSampleMaintenancePipelines</name>
    </operation>
    
    <operation>
        <description>Run routine maintenance tasks on all the user's Samples</description>
        <name>runUserSampleMaintenancePipelines</name>
        <parameter>
            <description>User to run as (e.g. "flylight")</description>
            <name>user</name>
            <type>java.lang.String</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Clean old, non-annotated results from Sample entities. WARNING: this depends heavily on the Solr index, and should be run at an off-peak time, directly after runSolrIndexSync.</description>
        <name>runSampleCleaning</name>
        <parameter>
           <description>User to run as (e.g. "flylight")</description>
           <name>user</name>
           <type>java.lang.String</type>
        </parameter>
        <parameter>
           <description>Should this run as a test without making any real changes?</description>
           <name>testRun</name>
           <type>java.lang.Boolean</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Synchronize the given user's Sample fileshare with the database</description>
        <name>runSampleTrashCompactor</name>
        <parameter>
           <description>User to run as (e.g. "flylight")</description>
           <name>user</name>
           <type>java.lang.String</type>
        </parameter>
        <parameter>
           <description>Should this run as a test without making any real changes?</description>
           <name>testRun</name>
           <type>java.lang.Boolean</type>
        </parameter>
    </operation>

    <operation>
        <description>Compress all of the user's v3draw files to v3dpbd</description>
        <name>runSampleDataCompression</name>
        <parameter>
            <description>User to run as (e.g. "flylight")</description>
            <name>user</name>
            <type>java.lang.String</type>
        </parameter>
        <parameter>
           <description>Should this run as a test without making any real changes?</description>
           <name>testRun</name>
           <type>java.lang.Boolean</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Compress the given sample's' v3draw files to v3dpbd</description>
        <name>runSingleSampleDataCompression</name>
        <parameter>
           <description>Entity id of the Sample to run (e.g. "1679282451010027618")</description>
           <name>sampleId</name>
           <type>java.lang.String</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Register default image for the given result</description>
        <name>runResultImageRegistration</name>
        <parameter>
            <description>Entity id of the result to register (e.g. "1679282451010027618")</description>
            <name>resultId</name>
            <type>java.lang.String</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Register all images for a user's samples</description>
        <name>runSampleImageRegistration</name>
        <parameter>
            <description>User to run as (e.g. "flylight")</description>
            <name>user</name>
            <type>java.lang.String</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Archive the given sample</description>
        <name>runSingleSampleArchival</name>
        <parameter>
           <description>Entity id of the sample to run (e.g. "1679282451010027618")</description>
           <name>sampleEntityId</name>
           <type>java.lang.String</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Archive all samples for a given user</description>
        <name>runCompleteSampleArchival</name>
        <parameter>
            <description>User to run as (e.g. "flylight")</description>
            <name>user</name>
            <type>java.lang.String</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Run all pipelines for all Data Sets for all users</description>
        <name>runAllDataSetPipelines</name>
        <parameter>
            <description>Mode for processing (NEW, INCOMPLETE, ALL, NONE)</description>
            <name>runMode</name>
            <type>java.lang.String</type>
        </parameter>
        <parameter>
            <description>Reuse previous sample processing results</description>
            <name>reuseProcessing</name>
            <type>java.lang.Boolean</type>
        </parameter>
        <parameter>
            <description>Reuse previous alignment results</description>
            <name>reuseAlignment</name>
            <type>java.lang.Boolean</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Run all pipelines for all Data Sets for a particular user</description>
        <name>runUserDataSetPipelines</name>
        <parameter>
            <description>User to run as (e.g. "flylight")</description>
            <name>user</name>
            <type>java.lang.String</type>
        </parameter>
        <parameter>
            <description>Data Set Name (e.g. "Cell Count" or leave empty to run all data sets for the user)</description>
            <name>dataSetName</name>
            <type>java.lang.String</type>
        </parameter>
        <parameter>
            <description>Mode for processing (NEW, INCOMPLETE, ALL, NONE)</description>
            <name>runMode</name>
            <type>java.lang.String</type>
        </parameter>
        <parameter>
            <description>Reuse previous sample processing results</description>
            <name>reuseProcessing</name>
            <type>java.lang.Boolean</type>
        </parameter>
        <parameter>
            <description>Reuse previous alignment results</description>
            <name>reuseAlignment</name>
            <type>java.lang.Boolean</type>
        </parameter>
        <return-type>java.lang.String</return-type>
    </operation>
    
    <operation>
        <description>Run all the pipelines configured for all the Samples in a given Folder</description>
        <name>runSampleFolder</name>
        <parameter>
           <description>Entity id of the Folder to run (e.g. "1679282451010027618")</description>
           <name>folderId</name>
           <type>java.lang.String</type>
        </parameter>
        <parameter>
            <description>Reuse previous sample processing results</description>
            <name>reuseProcessing</name>
            <type>java.lang.Boolean</type>
        </parameter>
        <parameter>
            <description>Reuse previous alignment results</description>
            <name>reuseAlignment</name>
            <type>java.lang.Boolean</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Run all the pipelines configured for a particular Sample</description>
        <name>runSamplePipelines</name>
        <parameter>
           <description>Entity id of the Sample to run (e.g. "1679282451010027618")</description>
           <name>sampleId</name>
           <type>java.lang.String</type>
        </parameter>
        <parameter>
            <description>Reuse previous sample processing results</description>
            <name>reuseProcessing</name>
            <type>java.lang.Boolean</type>
        </parameter>
        <parameter>
            <description>Reuse previous alignment results</description>
            <name>reuseAlignment</name>
            <type>java.lang.Boolean</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Run a specific pipeline for a single Sample</description>
        <name>runConfiguredSamplePipeline</name>
        <parameter>
           <description>Entity id of the sample to run (e.g. "1679282451010027618")</description>
           <name>sampleEntityId</name>
           <type>java.lang.String</type>
        </parameter>
        <parameter>
           <description>Name of configuration (e.g. "FlyLightOpticLobe" will select the process file named "PipelineConfig_FlyLightOpticLobe.process")</description>
           <name>configurationName</name>
           <type>java.lang.String</type>
        </parameter>
        <parameter>
            <description>Reuse previous sample processing results</description>
            <name>reuseProcessing</name>
            <type>java.lang.Boolean</type>
        </parameter>
        <parameter>
            <description>Reuse previous alignment results</description>
            <name>reuseAlignment</name>
            <type>java.lang.Boolean</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Apply the given process file to every sample in the data set</description>
        <name>applyProcessToDataset</name>
        <parameter>
            <description>User to run as (e.g. "flylight")</description>
            <name>user</name>
            <type>java.lang.String</type>
        </parameter>
        <parameter>
            <description>Data Set Name (e.g. "Cell Count" or leave empty to run all data sets for the user)</description>
            <name>dataSetName</name>
            <type>java.lang.String</type>
        </parameter>
        <parameter>
            <description>Include parent samples or children samples, a.k.a subsamples (e.g. "parent" or "children")</description>
            <name>parentOrChildren</name>
            <type>java.lang.String</type>
        </parameter>
        <parameter>
           <description>Process file name (e.g. "PostPipeline_AddVerifyMovie")</description>
           <name>processName</name>
           <type>java.lang.String</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Apply the given process file to the sample</description>
        <name>applyProcessToSample</name>
        <parameter>
           <description>Entity id of the sample to run (e.g. "1679282451010027618")</description>
           <name>sampleEntityId</name>
           <type>java.lang.String</type>
        </parameter>
        <parameter>
           <description>Process file name (e.g. "PostPipeline_AddVerifyMovie")</description>
           <name>processName</name>
           <type>java.lang.String</type>
        </parameter>
    </operation>
        
    <operation>
        <description>Run a separation for a given result entity</description>
        <name>runNeuronSeparationPipeline</name>
        <parameter>
           <description>Entity id of the result to run (e.g. "1679282451010027618")</description>
           <name>resultEntityId</name>
           <type>java.lang.String</type>
        </parameter>
    </operation>

    <operation>
        <description>Create the fastLoad artifacts for a single neuron separation</description>
        <name>runSingleFastLoadArtifactPipeline</name>
        <parameter>
           <description>Entity id of the neuron separation result entity</description>
           <name>separationEntityId</name>
           <type>java.lang.String</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Create the fastLoad artifacts for all single neuron separations</description>
        <name>runCompleteFastLoadArtifactPipeline</name>
        <parameter>
            <description>User to run as (e.g. "flylight")</description>
            <name>user</name>
            <type>java.lang.String</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Create the maskChan artifacts for a single neuron separation</description>
        <name>runSingleMaskChanArtifactPipeline</name>
        <parameter>
           <description>Entity id of the neuron separation result entity</description>
           <name>separationEntityId</name>
           <type>java.lang.String</type>
        </parameter>
    </operation>
    
    <operation>
        <description>Create the maskChan artifacts for all single neuron separations</description>
        <name>runCompleteMaskChanArtifactPipeline</name>
        <parameter>
            <description>User to run as (e.g. "flylight")</description>
            <name>user</name>
            <type>java.lang.String</type>
        </parameter>
    </operation>
    
</mbean>
