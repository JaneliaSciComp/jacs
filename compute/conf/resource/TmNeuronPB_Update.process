<!--
	Converts all TmNeurons in a Large Volume Viewer workspace, from neuron-as-Entity, to neuron-as-EntityData/protobuf.
-->
<process name="TmNeuron Protobuf Update" processor="java:/jms/queue/tmNeuronUpdate" startEvent="pending">

    <sequence>
	<!-- Import basic variables from the TmNeuronPBUpdateTask

    	     This service receives instructions below on which key:value pairs to transfer from task parameters
    	     to process parameters. It then sets as outputs some of these parameters so they are available
    	     to downstream steps. -->

    	<operation name="Import Variables" processor="org.janelia.it.jacs.compute.service.common.InitVariablesFromTaskService">
            <input name="TASK_PARAMETER_1" value="workspace id"/>
            <input name="PROCESS_VARIABLE_1" value="WORKSPACE_ID"/>
    	    <output name="WORKSPACE_ID"/>
    	</operation>
    	<operation name="TmNeuron Protobuf Update Service" processor="org.janelia.it.jacs.compute.service.tiledMicroscope.TmNeuronPBUpdateService">
            <input name="WORKSPACE_ID"/>
    	</operation>
    </sequence>
</process>

