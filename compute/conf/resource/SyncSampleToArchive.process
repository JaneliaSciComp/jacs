<!-- 
	Asynchronously move the Sample's file node to the archive. 
-->
<process name="Asynchronously synchronize sample to archive" processor="queue/samplePipelineLauncher" startEvent="pending">
    <sequence>
	
	   <input name="SAMPLE_ENTITY_ID"/>
	
	    <!-- Import variables from the task -->
	    <operation name="Import Variables" processor="org.janelia.it.jacs.compute.service.common.InitVariablesFromTaskService">
    	    <input name="OVERRIDE" value="false"/>
            <input name="TASK_PARAMETER_1" value="sample entity id"/>
            <input name="PROCESS_VARIABLE_1" value="SAMPLE_ENTITY_ID"/>
	        <output name="SAMPLE_ENTITY_ID"/>
	    </operation>
	    
        <!-- Send a message to archive the sample nodes asynchronously -->
        <operation name="Send archival message" processor="org.janelia.it.jacs.compute.service.entity.sample.SampleArchiveService">
            <input name="MODE" value="SEND_ARCHIVAL_MESSAGE"/>
            <input name="SAMPLE_ENTITY_ID"/>
        </operation>

    </sequence>
</process>