<!-- 
	Export the screen pattern intensity scores.
	
	While we're in there, we can also correct folder placement of any image which is in the wrong place.
-->
<process name="Screen Score Export Pipeline" processor="java:/jms/queue/largePipelineLauncher" startEvent="pending" updateProcessStatus="on_success">
	<sequence>
	
	    <!-- Import variables from the MCFODataPipelineTask -->
	    <operation name="Import Variables" processor="org.janelia.it.jacs.compute.service.common.InitVariablesFromTaskService">
            <input name="TASK_PARAMETER_1" value="top level folder name"/>
            <input name="PROCESS_VARIABLE_1" value="TOP_LEVEL_FOLDER_NAME"/>
            <input name="TASK_PARAMETER_2" value="output filepath"/>
            <input name="PROCESS_VARIABLE_2" value="OUTPUT_FILEPATH"/>
	        <output name="TOP_LEVEL_FOLDER_NAME"/>
	        <output name="OUTPUT_FILEPATH"/>
	    </operation>
		 
	    <!-- Export to the given file -->
		<operation name="Load Screen Scores" processor="org.janelia.it.jacs.compute.service.fly.ScreenScoresExportService">
			<input name="TOP_LEVEL_FOLDER_NAME"/>
			<input name="OUTPUT_FILEPATH"/>
		</operation>
		
    </sequence>
</process>