<!--

	This pipeline will kick off the lineage classification prediction to generate probabilities.  It uses a parameter to look up the location for the training model data.
    It stores this information in a json probabliities file that is used by the console to create a search.
-->

<process name="NeuronLineageClassifier" processor="queue/lineageClassifierPipelineLauncher" startEvent="pending" updateProcessStatus="on_success">
	<sequence>
	    <sequence>
	        <operation name="Import Variables" processor="org.janelia.it.jacs.compute.service.common.InitVariablesFromTaskService">
                <input name="TASK_PARAMETER_1" value="sample id list"/>
                <input name="PROCESS_VARIABLE_1" value="SAMPLE_ID_LIST"/>
                <output name="SAMPLE_ID_LIST"/>
            </operation>

    	    <operation name="Create Neuron Lineage Classifier Result File Node" processor="org.janelia.it.jacs.compute.service.neuronClassifier.NeuronClassifierService">
                <input name="MODE" value="NODECREATION"/>
                <output name="RESULT_FILE_NODE_ID"/>
                <output name="RESULT_FILE_NODE_DIR" />
            </operation>

	    	<operation name="Generate Metadata for Lineage Classificat Separation Analysis" processor="org.janelia.it.jacs.compute.service.neuronClassifier.NeuronClassifierService" startEvent="running">
	    	    <input name="MODE" value="TRAINING"/>
	    	    <input name="SAMPLE_ID_LIST"/>
    			<output name="METADATA"/>
    		</operation>


     	</sequence>
    </sequence>
</process>